import { ref } from 'vue';
import { Meta, Story, Canvas } from '@storybook/addon-docs';
import {
  DFade,
  DSlide,
  DSlideFade,
  DScale,
  DScaleFade,
  DFlip,
  DFlipFade
} from '.';
import { DButton } from '@daria/button';
import { DFlex } from '@daria/layout';

<Meta title="Components/Transitions" />

# Transitions

export const Toggle = {
  components: { DSlide, DFlex, DButton },
  emits: ['toggle', 'update:modelValue'],
  props: {
    modelValue: { type: null },
    canInvert: { type: Boolean, default: false }
  },
  template: `
  <DFlex gap="3" align="center">
    <DButton @click="$emit('toggle')">Toggle</DButton>
    <label v-if="canInvert">
      <input 
        type="checkbox" 
        :value="modelValue" 
        @change="$emit('update:modelValue', !!$event.target.value)" 
      />
      Invert on out
    </label>
  </DFlex>`
};

## Fade

export const DFadeTemplate = args => ({
  components: { DFade, Toggle },
  setup() {
    const isVisible = ref(false);
    return { isVisible };
  },
  template: `
  <Toggle @toggle="isVisible = !isVisible"/>
  <DFade :is-visible="isVisible">
    I am the content
  </DFade>`
});

<Canvas>
  <Story name="Fade">{DFadeTemplate.bind({})}</Story>
</Canvas>

## Slide

export const DSlideTemplate = args => ({
  components: { DSlide, Toggle },
  setup() {
    const isVisible = ref(false);
    const invertOnOut = ref(false);
    return { isVisible, invertOnOut };
  },
  template: `
  <Toggle @toggle="isVisible = !isVisible" v-model="invertOnOut" can-invert />
  <DSlide :is-visible="isVisible" :distance="100" :invert-on-out="invertOnOut">
    I am the content
  </DSlide>`
});

<Canvas>
  <Story name="Slide">{DSlideTemplate.bind({})}</Story>
</Canvas>

## Slide-Fade

export const DSlideFadeTemplate = args => ({
  components: { DSlideFade, Toggle },
  setup() {
    const isVisible = ref(false);
    const invertOnOut = ref(false);
    return { isVisible, invertOnOut };
  },
  template: `
  <Toggle @toggle="isVisible = !isVisible" v-model="invertOnOut" can-invert />
  <DSlideFade :is-visible="isVisible" :distance="100" :invert-on-out="invertOnOut">
    I am the content
  </DSlideFade>`
});

<Canvas>
  <Story name="SlideFade">{DSlideFadeTemplate.bind({})}</Story>
</Canvas>

## Scale

export const DScaleTemplate = args => ({
  components: { DScale, Toggle },
  setup() {
    const isVisible = ref(false);
    return { isVisible };
  },
  template: `
  <Toggle @toggle="isVisible = !isVisible" />
  <DScale 
    :is-visible="isVisible" 
    :distance="100" 
    bg="red.1" 
    w="200px" 
  >
    I am the content
  </DScale>`
});

<Canvas>
  <Story name="Scale">{DScaleTemplate.bind({})}</Story>
</Canvas>

## Scale-Fade

export const DScaleFadeTemplate = args => ({
  components: { DScaleFade, Toggle },
  setup() {
    const isVisible = ref(false);
    return { isVisible };
  },
  template: `
  <Toggle @toggle="isVisible = !isVisible" />
  <DScaleFade
    :is-visible="isVisible" 
    :distance="100" 
    bg="red.1" 
    w="200px" 
  >
    I am the content
  </DScaleFade>`
});

<Canvas>
  <Story name="ScaleFade">{DScaleFadeTemplate.bind({})}</Story>
</Canvas>

## Flip

export const DFlipTemplate = args => ({
  components: { DFlip, Toggle },
  setup() {
    const isVisible = ref(false);
    const invertOnOut = ref(false);
    return { isVisible, invertOnOut };
  },
  template: `
  <Toggle @toggle="isVisible = !isVisible"  v-model="invertOnOut" can-invert />
  <div style="perspective: 300px; perspective-origin: center; width: 200px">
    <DFlip
      :is-visible="isVisible" 
      bg="red.1" 
      h="100px"
      :invert-on-out="invertOnOut"
    >
      I am the content
    </DFlip>
  </div>`
});

<Canvas>
  <Story name="Flip">{DFlipTemplate.bind({})}</Story>
</Canvas>

## Flip-Fade

export const DFlipFadeTemplate = args => ({
  components: { DFlipFade, Toggle },
  setup() {
    const isVisible = ref(false);
    const invertOnOut = ref(false);
    return { isVisible, invertOnOut };
  },
  template: `
  <Toggle @toggle="isVisible = !isVisible"  v-model="invertOnOut" can-invert />
  <div style="perspective: 300px; perspective-origin: center; width: 200px">
    <DFlipFade
      :is-visible="isVisible" 
      bg="red.1" 
      h="100px"
      :invert-on-out="invertOnOut"
    >
      I am the content
    </DFlipFade>
  </div>`
});

<Canvas>
  <Story name="FlipFade">{DFlipFadeTemplate.bind({})}</Story>
</Canvas>
